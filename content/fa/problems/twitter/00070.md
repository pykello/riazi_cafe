# Title
پارکینگ
# Timestamp
2024-05-09 06:46
# Tags
combinatorics
# ID
مساله ۷۰
# Difficulty
0
# Image
/images/problems/70_pic.jpg
# Statement
 ۱۰ جای پارک کردن داریم که به صورت خطی از چپ به راست کنار قرار گرفتند. ۱۰ تا هم راننده داریم که هر کدوم یک جای پارک کردن مورد علاقه دارند (ممکنه چند نفر به یک جا علاقه داشته باشند). راننده‌ها به ترتیب از چپ وارد می‌شوند. هر راننده اگر جای پارک کردن مورد علاقه‌ش خالی بود، همونجا پارک می‌کنه. وگرنه در اولین جای خالی بعد از جای مورد علاقه‌شون پارک می‌کنه. اگر با این روش جای پارک پیدا نکرد، کلا رد میشه و میره.

چند حالت از جای پارک‌های مورد علاقه طوریه که همه راننده‌ها بتونند پارک کنند؟

(یک حالت جای پارک‌های مورد علاقه دنباله‌ای از ۱۰ عدد a_1 تا a_10 ه، که a_i شماره جای پارک کردن مورد علاقه راننده‌ایه که ترتیب ورودش i است)


منبع سوال: المپیاد ریاضی سن پترزبورگ

لینک سوال در توویتر: https://x.com/Riazi_Cafe/status/1788806647030387112

# Solution

پاسخ $11^9$ است. به طور کلی اگر $n$ راننده و $n$ جای پارکینگ داشته باشیم، پاسخ $(n+1)^{n-1}$ است.

### راه‌حل اول

مساله را به این صورت تغییر می‌دهیم: مثل مساله‌ي اصلی ‏$‎n‏$‎ راننده داریم ولی  یک جای پارکینگ دیگر اضافه می‌کنیم، و این ‏$‎n+1‏$‎ جای پارکینگ را دایره‌وار کنار هم قرار می‌دهیم. هر کس یک جای پارکینگ مورد علاقه دارد و راننده‌ها به ترتیب وارد می‌شوند و هر کس از جای پارکینگ مورد علاقه خود شروع می‌کند و در دایره حرکت می‌کند و در اولین جای پارکینگ خالی پارک می‌کند.

در این مساله‌ی تغییر یافته همه می‌توانند پارک کنند و در پایان یکی از خانه‌ها خالی می‌ماند. یک حالت تخصیص جاهای مورد علاقه در مساله‌ی تغییر یافته جزو حالت‌های مطلوب در مساله‌ی اصلی است اگر و تنها اگر در مساله‌ی تغییر یافته خانه‌ی خالی مانده خانه‌ی $n+1‏$‎ ام باشد.

در مساله‌ی تغییر یافته چون هر کس ‏$‎n+1‏$‎ گزینه برای جای پارکینگ مورد علاقه‌اش دارد، $(n+1)^n$ حالت تخصیص جاهای مورد علاقه وجود دارد. همچنین در مساله‌ی تغییر یافته اگر حالت تخصیص جاهای مورد علاقه ‏$‎(a_1,...,a_n)$ منجر به خالی ماندن خانه‌ی $x$ شود، در اینصورت حالت تخصیص ‏$‎(a_1+d,...,a_n+d)\mod(n+1)‏$‎ منجر به خالی ماندن خانه‌ی ‏$‎(x+d)\mod(n+1)‏$‎ خواهد شد. پس به ازای یک حالت تخصیص خاص، دقیقا یکی از مقادیر $d=0..n‏$‎ منجر به خالی ماندن خانه‌ی ‏$‎n+1‏$‎ ام میشود و جزو حالت‌های مطلوب مساله‌ی اصلی نیز هست.

بنابراین تعداد کل حالت‌های مطلوب مساله‌ی اصلی ‏$\frac{(n+1)^n}{n+1}‏=(n+1)^{n-1}‏$‎‎ است.

این استدلال منسوب به [Henry O. Pollak](https://en.wikipedia.org/wiki/Henry_O._Pollak) است و در منابع مختلف مثل [صفحه ویکی‌پدیای مساله](https://en.wikipedia.org/wiki/Parking_function) آمده.


